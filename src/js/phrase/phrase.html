<div class='wrapper'>


    <div class="content-bg">


        <main class="o-main o-main--hasSubHeader o-main--hasLeftContainer" role="main">
            <div class="o-container">

                <div class='row-fluid subtitle-box'>
                    <div class='span6'>
                        <h2>
                            Phrases
                        </h2>
                    </div>
                </div>

                <div class='row-fluid project-nav-phrase-meta'>
                    <ol class='list-unstyled project-nav-phrase-meta-list'>
                        <li ng-class="$ctrl.searchFilter.status == 'visible' ? 'span4 active' : 'span4'">
                            <a ng-click="$ctrl.setActiveStatus('visible')">
                                <span class='highlight'>
                                  {{$ctrl.visiableCount}}
                                </span>
                                visible {{$ctrl.visiableCount != 1 ? 'phrases' : 'phrase'}} 
                            </a>
                        </li>
                        <li ng-class="$ctrl.searchFilter.status == 'hidden' ? 'span4 active' : 'span4'">
                            <a ng-click="$ctrl.setActiveStatus('hidden')">
                                <span class='highlight'>
                                  {{$ctrl._phrases.length - $ctrl.visiableCount}}
                                </span>
                                hidden {{$ctrl._phrases.length - $ctrl.visiableCount != 1 ? 'phrases' : 'phrase'}} 
                            </a>
                        </li>
                        <li ng-class="$ctrl.searchFilter.status == '' ? 'span4 active' : 'span4'">
                            <a ng-click="$ctrl.setActiveStatus('')">
                                <span class='highlight'>
                                  {{::$ctrl._phrases.length}}
                                </span>
                                {{::$ctrl._phrases.length != 1 ? 'phrases' : 'phrase'}}  in total
                            </a>
                        </li>
                    </ol>
                </div>

                <div class='row-fluid'>
                    <div class='span12 content-box bottom-no-radius bottom-no-border'>
                        <div class='row-fluid'>
                            <div class='span12 content-box-header'>
                                <div class='row-fluid'>
                                    <div class='span4 content-box-header-content fl'>
                                        <form>
                                            <div class='input-prepend'>
                                                <span class='add-on'>
                                                  <i class='icon-search'></i>
                                                </span>
                                                <input class='span12' placeholder='Find a phrase...' type='text' 
                                                    ng-model="$ctrl.searchKeyword">
                                            </div>
                                        </form>
                                    </div>
                                    <div class='content-box-header-content fr'>
                                        <div class='count-unit'>
                                            Filter:
                                            <div class="btn-group bootstrap-select show-tick ng-pristine ng-untouched ng-valid ng-not-empty open" style="width: 180px;">
                                                <button data-toggle="dropdown" class="btn dropdown-toggle btn-default" type="button" title="All phrases" aria-expanded="false" ng-click="menuOpen = true">
                                                    <span class="filter-option pull-left" ng-show="$ctrl.searchFilter.status == ''">
                                                        <i class="glyphicon icon-align-left"></i> All phrases
                                                    </span>
                                                    <span class="filter-option pull-left" ng-show="$ctrl.searchFilter.status == 'visible'">
                                                        <i class="glyphicon icon-eye-open"></i> Visible phrases
                                                    </span>
                                                    <span class="filter-option pull-left" ng-show="$ctrl.searchFilter.status == 'hidden'">
                                                        <i class="glyphicon icon-eye-close"></i> Hidden phrases
                                                    </span>
                                                    &nbsp;
                                                    <span class="bs-caret">
                                                        <span class="caret"></span>
                                                    </span>
                                                </button>
                                                <div class="dropdown-menu open" style="max-height: 406px; overflow: hidden; min-height: 0px;" ng-show="menuOpen" ng-click="menuOpen = false">
                                                    <ul role="menu" class="dropdown-menu inner" style="max-height: 394px; overflow-y: auto; min-height: 0px;">
                                                        <li data-original-index="0" ng-click="$ctrl.setActiveStatus('')">
                                                            <a data-tokens="null" tabindex="0">
                                                                <span class="glyphicon icon-align-left"></span> <span class="text">All phrases</span><span class="glyphicon glyphicon-ok check-mark"></span>
                                                            </a>
                                                        </li>
                                                        <li data-original-index="1" ng-click="$ctrl.setActiveStatus('visible')">
                                                            <a data-tokens="null" tabindex="0">
                                                                <span class="glyphicon icon-eye-open"></span> <span class="text">Visible phrases</span><span class="glyphicon glyphicon-ok check-mark"></span>
                                                            </a>
                                                        </li>
                                                        <li data-original-index="2" ng-click="$ctrl.setActiveStatus('hidden')">
                                                            <a data-tokens="null" tabindex="0">
                                                                <span class="glyphicon icon-eye-close"></span> <span class="text">Hidden phrases</span><span class="glyphicon glyphicon-ok check-mark"></span>
                                                            </a>
                                                        </li>
                                                    </ul>
                                                </div>
                                                <select class='selectpicker show-tick' data-width='180px' ng-model="$ctrl.searchFilter.status">
                                                    <option ng-selected="$ctrl.searchFilter.status == ''" value="" data-icon='icon-align-left'>All phrases</option>
                                                    <option ng-selected="$ctrl.searchFilter.status == 'visible'" value="visible" data-icon='icon-eye-open'>Visible phrases</option>
                                                    <option ng-selected="$ctrl.searchFilter.status == 'hidden'" value="hidden" data-icon='icon-eye-close'>Hidden phrases</option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class='row-fluid'>
                            <div class='span12 content-box-subheader bulk-actions-box bulk-actions-box-language boxSized'>
                                <div class='row-fluid'>
                                    <div class='span9'>
                                        <input class='selectAllLangs checkbox-lang tt' data-original-title='Select all'
                                               data-placement='top' data-toggle='tooltip' title='' type='checkbox'
                                               ng-click="$ctrl.toggleAll()" ng-model="$ctrl.isAllSelected">
                                        <button ng-class="$ctrl.selectedCount <= 0 ? 
                                                'btn btn-download-multiple btn-narrow tt disabled' : 'btn btn-download-multiple btn-narrow tt'"
                                                data-original-title='Hide selected phrases from collaborators.'
                                                data-placement='top' data-toggle='tooltip' title='' type='button'
                                                uib-tooltip="Hide selected phrases from collaborators."
                                                ng-disabled="$ctrl.selectedCount <= 0" ng-click="$ctrl.setPhrasesStatus('hidden')">
                                            <i class='icon-eye-close'></i>
                                            Hide
                                        </button>
                                        <button ng-class="$ctrl.selectedCount <= 0 ? 
                                                'btn btn-download-multiple btn-narrow tt disabled' : 'btn btn-download-multiple btn-narrow tt'"
                                                data-original-title='Make selected phrases visible to collaborators.'
                                                data-placement='top' data-toggle='tooltip' title='' type='button'
                                                uib-tooltip="Make selected phrases visible to collaborators."
                                                ng-disabled="$ctrl.selectedCount <= 0" ng-click="$ctrl.setPhrasesStatus('visible')">
                                            <i class='icon-eye-open'></i>
                                            Visible
                                        </button>
                <span class='selected-lang-no blue-txt hide'>
                  Selected {{$ctrl.selectedCount}} {{$ctrl.selectedCount != 1 ? 'phrases' : 'phrase'}}
                  <span class='selected-phrase-no-txt'></span>
                </span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class='row-fluid'>
                    <div class='span12'>
                        <div class='phrase-manage-list-container'>
                            <ul class='phrase-manage-list'>

                                <!-- start phrase list -->
                                <li class='phrase-manage-list-item' 
                                    ng-repeat="phrase in ($ctrl.filteredPhrases = ($ctrl._phrases | filter:$ctrl.searchFilter.status | searchOnFields:['id', 'context', 'value', 'notes']:$ctrl.searchKeyword | orderBy:$ctrl.orderFilter))">
                                    <div class='media-object'>
                                        <div class='media pull-left'>
                                            <input class='checkbox-lang checkbox-count selectedLang' type='checkbox' ng-model="phrase.selected" ng-change="$ctrl.itemToggled(phrase.selected, $index)">
                                        </div>
                                        <div class='media-body'>
                                            <div class='phrase-header'>
                                                <div class='phrase-meta'>
                                                    <div class='id'>
                                                        <span>ID:</span>
                                                        {{::phrase.id}}
                                                    </div>
                                                    <div class='context'>
                                                        <span>Context:</span>
                                                        {{::phrase.context}}
                                                    </div>
                                                </div>
                                            </div>
                                            <div class='phrase-body'>
                                                <p ng-bind-html="::phrase.value | trust"></p>
                                            </div>
                                            <div class='phrase-footer'>
                                                <div class='fr'>
                                                    <ul class='phrase-actions'>

                                                        <li>
                                                            <a class='tt'
                                                               data-original-title='Write notes to translators to help them understand the context of this phrase'
                                                               data-placement='top' data-toggle='modal'
                                                               title=''
                                                               uib-tooltip="Write notes to translators to help them understand the context of this phrase"
                                                               ng-click='$ctrl.openModal($index)'>
                                                                Add notes
                                                            </a>
                                                        </li>
                                                        <li><i ng-class="phrase.status == 'visible' ? 'icon-eye-open' : 'icon-eye-close'"></i></li>
                                                    </ul>

                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </li>
                                <!-- end phrase list -->
                            </ul>
                        </div>
                    </div>
                </div>

            </div><!-- o container -->
        </main><!-- main -->


        <div aria-hidden='true' aria-labelledby='modal-note-to-translators'
             ng-class="$ctrl.currentEditing ? 'modal-note-to-translators modal-phrase modal' : 'modal-note-to-translators modal-phrase modal fade'" role='dialog' tabindex='-1'>
            <form>
                <div class='modal-header'>
                    <button aria-hidden='true' class='close' data-dismiss='modal' type='button'>×</button>
                    <h3 id='myModalLabel'>Note to translators</h3>
                </div>
                <div class='modal-body'>
                    <label class='hide' for='notes-to-translator'>Note to Translators</label>
                    <textarea class='input-block-level' id='notes-to-translator' name='notes-to-translator'
                              placeholder='Write a note to help translators understand the context of your phrase, for example, This phrase belongs to the welcome screen.'
                              rows='3'
                              ng-model="$ctrl.tempNotes"></textarea>
                </div>
                <div class='modal-footer'>
                    <button aria-hidden='true' class='btn' data-dismiss='modal' ng-click="$ctrl.closeModal()">Cancel</button>
                    <button class='btn btn-primary' ng-click="$ctrl.saveNotes()">Save</button>
                </div>
            </form>
        </div>


        <div aria-hidden='true' aria-labelledby='modal-length-limit'
             class='modal-length-limit modal-phrase modal hide fade' role='dialog' tabindex='-1'>
            <form>
                <div class='modal-header'>
                    <button aria-hidden='true' class='close' data-dismiss='modal' type='button'>×</button>
                    <h3 id='myModalLabel'>Length Limit</h3>
                </div>
                <div class='modal-body'>
                    <div class='length-limit-box-option length-limit-box-absolute'>
                        <div class='alert'>
          <span>
            Setting the maximum character to 0 means unlimited length.
          </span>
                        </div>
                        <p>
                            I want a maximum of
                            <input class='span1' name='max-characters' placeholder='0' type='number'>
                            characters,
                        </p>
                        <p class='last'>
                            The translator
                            <select name='absolute-hard-soft'>
                                <option value='must not exceed that'>
                                    must not exceed that
                                </option>
                                <option value='man exceed a little'>
                                    can exceed a little
                                </option>
                            </select>
                        </p>
                        <a class='js-length-limit-box-absolute' href='#'>
                            I don&rsquo;t know how long the length should be
                        </a>
                    </div>
                    <div class='length-limit-box-option length-limit-box-relative hide'>
                        <div class='alert'>
          <span>
            Setting the multiplier to 0 means unlimited length.
          </span>
                        </div>
                        <p>
                            This phrase is
          <span class='label'>
            1000
          </span>
                            characters, I want it roughly up to
          <span class='input-prepend'>
            <span class='add-on'>
              x
            </span>
            <input class='span1' name='character-length-multiplier' placeholder='2' type='number'>
          </span>
                            longer, which is a maximum of
          <span class='label'>
            2000
          </span>
                            characters.
                        </p>
                        <p class='last'>
                            The translator
                            <select name='relative-hard-soft'>
                                <option value='must not exceed that'>
                                    must not exceed that
                                </option>
                                <option value='can exceed a little'>
                                    can exceed a little
                                </option>
                            </select>
                        </p>
                        <a class='js-length-limit-box-relative' href='#'>
                            Actually I want to set an absolute limit
                        </a>
                    </div>
                </div>
                <div class='modal-footer'>
                    <button aria-hidden='true' class='btn' data-dismiss='modal'>Cancel</button>
                    <button class='btn btn-primary'>Save</button>
                </div>
            </form>
        </div>


    </div>


</div><!-- wrapper -->

<div ng-show="$ctrl.currentEditing" class="modal-backdrop fade in"></div>